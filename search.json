[{"title":"计算机网络基础","path":"/chenxi2333/2025/06/04/My-First-Blog/","content":"计算机网络是一个分层的结构，下层的协议和上层协议之间有严格的抽象解耦，下层的传输不会影响到上层。每一层只需要考虑这一层的协议实现就可以。这就是OSI网络分层结构。 从下而上网络有物理层、数据链路层、网络层、传输层。本文主要解析和理解数据链路层、网络层和传输层这三层的内容的。 参考文章： TCP协议详解 (史上最全)-CSDN博客 数据链路层 ？ 链路层是什么 主要负责的是网络点对点的传输。 具体来说就是如何实现局域网内的网络数据发送。 ![[链路层结构]] ？ 数据如何实现端到端的转发 MAC地址是这一层的核心协议。 每个硬件设备有一个MAC地址。这个MAC设备是固定且唯一的。 交换机的职责很简单，就是把MAC地址和端口进行对应。哪一个IO对应哪一个端口。 这个是一个自学习的过程，第一次发送是广播的，找到对应的配置表之后就会记录下来对应关系并且变成点对点的传输。 网络层 ？ 网络层是做什么的？ 再不同的子网之间进行传输。如图所示 ![[网络层结构]] 交换机的配置表是有限的，如果需要和外部网络的链接，依靠配置表和端口的对应关系是不够的。 因此加入了路由器这一个概念。 ？ 路由器是什么？ 路由器也可以看作是一个网络设备。具有自己的MAC地址，它的作用就是转发消息。 电脑A传给电脑1的消息，通过交换机1传给路由器，再由路由器传给交换机2，交换机2传给电脑1。 ？ 电脑A怎么知道电脑1需要转发？ 根据IP地址。IP地址子网掩码相同的表明在同一个子网下面，否则会将消息直接丢给路由器转发。 IP协议就是网络层地核心。 ？ IP地址意义是什么？ IP地址是子网的编号。如果说MAC地址是身份证，那么IP地址就像是家庭住址。 IP地址封装在MAC地址外侧，是网络层协议的主要部分。 有了IP地址后，消息的收发不再需要知道设备的MAC号了。 路由器接收到消息之后，会根据内部存储的IP地址表把指向自己的MAC改为设备的MAC。如果自己的网段内没有这个MAC，路由器会进行下一级的转发。 ？ 消息是如何在两个不同子网之间传递的？ 消息会封装中包含IP地址，终端需要对方的IP地址，交给交换机之后，交换机首先判断这个IP是否属于自己的网段，如果不是就丢给路由器。 如果IP地址同网段，就会查询交换机内部的IP-MAC对应表格（ARP表格），再根据MAC-端口对应表格将消息转发出去。 IP和MAC的对应表也是通过学习机制学习的，再电脑、交换机、路由器上都会有MAC-IP的对应表格。 路由器接收到消息之后会解析IP地址，根据IP地址转发给特定的终端，至此，通讯完成。 传输层 ？ 传输层的目的是什么？ 应用之间的通讯：设备和设备之间的通讯是不够的，很多时候需要电脑A上的某个应用和另一个应用进行通讯。于是需要再IP之前增加一个端口地址，对应进程的网络访问请求。——这就产生了UDP协议 传输层的另一个目的就是保证传输的可靠性：使用的思路是超时重发+回应消息——这用的就是TCP协议。 ？ UDP协议是什么？ 该协议是面向事务的，不保证传递和重复保护。需要有序、可靠地传输数据流的应用程序应使用传输控制协议 (TCP)。 ？ 什么是TCP协议 每发送一条协议后接收端如果接收到就选哦发挥一个ACK消息，通过这样的方式保证消息的可靠性。如果没有收到就会重发地机制，就是TCP机制地核心。 但是这样额方式存在的问题就是——双方的收发能力、网络的延迟、数据的先后顺序。 数据编号，依次发送并等待回应。 滑动窗口：通过一个滑动窗口，来控制发送的速率。 简单来说就是保证对方最多处理N（窗口长度）个数据包，等待接收到它的回应之后才会继续发送。窗 窗口的长度收到路线拥塞情况和接收端的接受处理速度的影响可以不断地变化。 三次握手协议： 握手的意义是：确认对方能够且愿意和自己”对话“。 场景模拟： “你能听到吗？”(SYN) “OK，你呢？”(SYN+ACK) “OK，可以的”(ACK) ——这就是三次握手，简单粗暴，保证了两边都能收到对方的消息。完成握手之后双方可以正式开始传输数据 四次挥手协议： 意义：确认对方话已经说完，并且可以结束”对话“了。 场景模拟： 主动断开方：”我没什么要说的了，你呢“(FIN) 被动断开方：”我把话说完“(ACK) （此时可以被动断开方再传输一些数据） 被动断开方：”OK了，我也说完了，可以挂了。“（FIN+ACK） 主动断开方：”挂了。“(ACK) ？ 传输层的内容 头文件包括了20字节（20*8bits）。 2+2：的源端口和目的端口号 4：序号 4：确认序号 2：头部长度（4bits）+预留（6bits）+控制标志（6） 2：窗口大小 2：校验和 2：紧急指针"},{"title":"Hello World","path":"/chenxi2333/2023/05/29/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new My New Post More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment ThemesSteller 这是一个商务简约风格的主题，使用说明参考 Steller"}]